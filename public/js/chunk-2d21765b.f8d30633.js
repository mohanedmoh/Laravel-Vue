(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21765b"],{c70a:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vue-confirm-dialog"),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("v-card",[a("v-card-title",[t._v(" Filtering options ")]),a("v-card-text",[a("validation-observer",{ref:"observer2",scopedSlots:t._u([{key:"default",fn:function(e){var r=e.handleSubmit;return[a("b-form",{attrs:{inline:""},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),r(t.applyFilter)}}},[a("div",{staticClass:"col-md-3"},[a("validation-provider",{attrs:{name:"type",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-form-group",{attrs:{label:"Type"}},[a("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{options:t.types,state:t.getValidationState(e),"aria-describedby":"f_type"},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null}},[t._v("-- Please select an option --")])]},proxy:!0}],null,!0),model:{value:t.filter.type,callback:function(e){t.$set(t.filter,"type",e)},expression:"filter.type"}}),a("b-form-invalid-feedback",{attrs:{id:"f_type"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)})],1),a("div",{staticClass:"col-md-3"},[a("validation-provider",{attrs:{name:"from_date",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-form-group",{attrs:{label:"From Date"}},[a("b-form-datepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{state:t.getValidationState(e),"aria-describedby":"from_date_area"},model:{value:t.filter.from_date,callback:function(e){t.$set(t.filter,"from_date",e)},expression:"filter.from_date"}}),a("b-form-invalid-feedback",{attrs:{id:"from_date_area"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)})],1),a("div",{staticClass:"col-md-3"},[a("validation-provider",{attrs:{name:"to_date",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-form-group",{attrs:{label:"To Date"}},[a("b-form-datepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{state:t.getValidationState(e),"aria-describedby":"to_date_area"},model:{value:t.filter.to_date,callback:function(e){t.$set(t.filter,"to_date",e)},expression:"filter.to_date"}}),a("b-form-invalid-feedback",{attrs:{id:"to_date_area"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)})],1),a("div",{staticClass:"col-md-3"},[a("b-form-group",{attrs:{label:"Actions"}},[a("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{type:"submit",variant:"success"}},[t._v("Apply Filter")]),a("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{variant:"warning"},on:{click:function(e){return t.fetchRecords()}}},[t._v("Clear Filter")])],1)],1)])]}}])})],1)],1)],1)]),a("hr"),a("div",{staticClass:"row"},[a("div",{ref:"table",staticClass:"col-md-12"},[a("v-card",[a("v-card-title",[t._v(" Records "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer")],1),a("v-data-table",{attrs:{headers:t.headers,items:t.records,search:t.search,"item-key":"id","single-expand":!0,expanded:t.expanded,"show-expand":""},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"expanded-item",fn:function(e){var r=e.headers,s=e.item;return[a("td",{attrs:{colspan:r.length}},[t._v(" "+t._s(s.description)+" ")])]}},{key:"item.status_id",fn:function(e){var r=e.item;return[a("td",{staticClass:"text-right"},[1==r.status_id?a("span",{staticClass:"label label-lg label-light-warning label-inline"},[t._v(" Pendding ")]):t._e(),2==r.status_id?a("span",{staticClass:"label label-lg label-light-success label-inline"},[t._v(" Finished ")]):t._e()])]}},{key:"item.actions",fn:function(e){var r=e.item;return[a("v-icon",{attrs:{title:"Mark as done"},on:{click:function(e){return t.finish(r)}}},[t._v("fa fa-check")]),a("a",{staticClass:"btn btn-icon btn-light mx-3 btn-sm",on:{click:function(e){return t.deleteItem(r)}}},[a("span",{staticClass:"svg-icon svg-icon-md svg-icon-danger"},[a("svg",{attrs:{version:"1.1",viewBox:"0 0 24 24",height:"24px",width:"24px","xmlns:xlink":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/svg"}},[a("title",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[t._v(" Delete Record ")]),a("defs",{attrs:{xmlns:"http://www.w3.org/2000/svg"}}),a("g",{attrs:{xmlns:"http://www.w3.org/2000/svg",id:"Stockholm-icons-/-General-/-Trash",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[a("rect",{attrs:{id:"bound",x:"0",y:"0",width:"24",height:"24"}}),a("path",{attrs:{d:"M6,8 L6,20.5 C6,21.3284271 6.67157288,22 7.5,22 L16.5,22 C17.3284271,22 18,21.3284271 18,20.5 L18,8 L6,8 Z",id:"round",fill:"#000000","fill-rule":"nonzero"}}),a("path",{attrs:{d:"M14,4.5 L14,4 C14,3.44771525 13.5522847,3 13,3 L11,3 C10.4477153,3 10,3.44771525 10,4 L10,4.5 L5.5,4.5 C5.22385763,4.5 5,4.72385763 5,5 L5,5.5 C5,5.77614237 5.22385763,6 5.5,6 L18.5,6 C18.7761424,6 19,5.77614237 19,5.5 L19,5 C19,4.72385763 18.7761424,4.5 18.5,4.5 L14,4.5 Z",id:"Shape",fill:"#000000",opacity:"0.3"}})])])])])]}}])})],1)],1)])],1)},s=[],i=(a("4de4"),a("2b0e")),n=a("0bce"),o={data:function(){return{records:[],types:[],expanded:[],edit:!1,record_id:"",search:"",filter:{type:null,from_date:null,to_date:null},headers:[{text:"ID",align:"start",sortable:!1,value:"id"},{text:"Type",value:"type.title"},{text:"Name",value:"name"},{text:"Subject",value:"title"},{text:"Email",value:"email"},{text:"Phone",value:"user_master.phone"},{text:"Date",value:"created_at"},{text:"status",value:"status_id",sortable:!1},{text:"Actions",value:"actions",sortable:!1}]}},mounted:function(){this.$store.dispatch(n["a"],[{title:"Feedbacks",route:"contacts"}])},getStatus:function(t){return 1==t?"Pendding":"Finished"},created:function(){this.fetchRecords()},methods:{getValidationState:function(t){var e=t.dirty,a=t.validated,r=t.valid,s=void 0===r?null:r;return e||a?s:null},resetFilter:function(){var t=this;this.filter={type:null,from_date:null,to_date:null},this.$nextTick((function(){t.$refs.observer2.reset()}))},fetchRecords:function(){var t=this;this.$ApiService.get("/Feedbacks").then((function(e){t.resetFilter(),t.records=e.data.data.records,t.types=e.data.data.types})).catch((function(t){i["default"].$toast.error("Some error happened, please try again!"),console.log(t)}))},applyFilter:function(){var t=this;this.$ApiService.post("/Feedbacks/Filter",this.filter).then((function(e){t.records=e.data.data})).catch((function(t){i["default"].$toast.error("get records failed"),console.log(t)}))},deleteItem:function(t){var e=this;this.$confirm({title:"Confirmation",message:"Are you sure you want to proceed?",button:{no:"No",yes:"Yes"},callback:function(a){a&&e.$ApiService.delete("/Feedback/".concat(t.id)).then((function(t){1==t.data.error?(e.$refs.table.scrollIntoView(),e.fetchRecords(),i["default"].$toast.success("".concat(t.data.result))):i["default"].$toast.error("".concat(t.data.result))})).catch((function(t){i["default"].$toast.error("Some error happened, please try again!"),console.log(t)}))}})},finish:function(t){var e=this;this.$confirm({title:"Confirmation",message:"Are you sure you want to mark this as done ?",button:{no:"No",yes:"Yes"},callback:function(a){a&&e.$ApiService.put("/Feedback/".concat(t.id)).then((function(t){1==t.data.error?(e.$refs.table.scrollIntoView(),e.fetchRecords(),i["default"].$toast.success("".concat(t.data.result))):i["default"].$toast.error("".concat(t.data.result))})).catch((function(t){i["default"].$toast.error("Some error happened, please try again!"),console.log(t)}))}})}}},l=o,c=a("2877"),d=a("6544"),u=a.n(d),f=a("b0af"),p=a("99d9"),m=a("8fea"),v=a("132d"),b=a("2fa4"),h=a("8654"),_=Object(c["a"])(l,r,s,!1,null,null,null);e["default"]=_.exports;u()(_,{VCard:f["a"],VCardText:p["a"],VCardTitle:p["b"],VDataTable:m["a"],VIcon:v["a"],VSpacer:b["a"],VTextField:h["a"]})}}]);
//# sourceMappingURL=chunk-2d21765b.f8d30633.js.map