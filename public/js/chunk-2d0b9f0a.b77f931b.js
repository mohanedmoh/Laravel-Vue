(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b9f0a"],{"34a4":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("vue-confirm-dialog"),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("v-card",[r("v-card-title",[t._v(" Filtering options ")]),r("v-card-text",[r("validation-observer",{ref:"observer2",scopedSlots:t._u([{key:"default",fn:function(e){var a=e.handleSubmit;return[r("b-form",{attrs:{inline:""},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),a(t.applyFilter)}}},[r("div",{staticClass:"col-md-3"},[r("validation-provider",{attrs:{name:"type",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("b-form-group",{attrs:{label:"Type"}},[r("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{options:t.types,state:t.getValidationState(e),"aria-describedby":"f_type"},scopedSlots:t._u([{key:"first",fn:function(){return[r("b-form-select-option",{attrs:{value:null}},[t._v("-- Please select an option --")])]},proxy:!0}],null,!0),model:{value:t.filter.type,callback:function(e){t.$set(t.filter,"type",e)},expression:"filter.type"}}),r("b-form-invalid-feedback",{attrs:{id:"f_type"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)})],1),r("div",{staticClass:"col-md-3"},[r("validation-provider",{attrs:{name:"from_date",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("b-form-group",{attrs:{label:"From Date"}},[r("b-form-datepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{state:t.getValidationState(e),"aria-describedby":"from_date_area"},model:{value:t.filter.from_date,callback:function(e){t.$set(t.filter,"from_date",e)},expression:"filter.from_date"}}),r("b-form-invalid-feedback",{attrs:{id:"from_date_area"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)})],1),r("div",{staticClass:"col-md-3"},[r("validation-provider",{attrs:{name:"to_date",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("b-form-group",{attrs:{label:"To Date"}},[r("b-form-datepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{state:t.getValidationState(e),"aria-describedby":"to_date_area"},model:{value:t.filter.to_date,callback:function(e){t.$set(t.filter,"to_date",e)},expression:"filter.to_date"}}),r("b-form-invalid-feedback",{attrs:{id:"to_date_area"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)})],1),r("div",{staticClass:"col-md-3"},[r("b-form-group",{attrs:{label:"Actions"}},[r("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{type:"submit",variant:"success"}},[t._v("Apply Filter")]),r("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{variant:"warning"},on:{click:function(e){return t.getRecords()}}},[t._v("Clear Filter")])],1)],1)])]}}])})],1)],1)],1)]),r("hr"),r("div",{staticClass:"row"},[r("div",{ref:"table",staticClass:"col-md-12"},[r("v-card",[r("v-card-title",[t._v(" Records "),r("v-spacer"),r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),r("v-spacer"),r("b-button",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:"#formData",expression:"'#formData'"}],attrs:{variant:"primary"},on:{click:function(e){return t.addItem()}}},[r("v-icon",[t._v("mdi-plus")]),t._v("New Record ")],1)],1),r("v-data-table",{attrs:{headers:t.headers,items:t.records,search:t.search,"item-key":"id","single-expand":!0,expanded:t.expanded,"show-expand":""},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"expanded-item",fn:function(e){var a=e.headers,i=e.item;return[r("td",{attrs:{colspan:a.length}},[t._v(" "+t._s(i.description)+" ")])]}},{key:"item.actions",fn:function(e){var a=e.item;return[r("v-icon",{on:{click:function(e){return t.viewImage(a)}}},[t._v("fa fa-image")]),r("a",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:"#formData",expression:"'#formData'"}],staticClass:"btn btn-icon btn-light btn-sm mx-3",on:{click:function(e){return t.editItem(a)}}},[r("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[r("svg",{attrs:{version:"1.1",viewBox:"0 0 24 24",height:"24px",width:"24px","xmlns:xlink":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/svg"}},[r("title",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[t._v(" Edit Record ")]),r("defs",{attrs:{xmlns:"http://www.w3.org/2000/svg"}}),r("g",{attrs:{xmlns:"http://www.w3.org/2000/svg",id:"Stockholm-icons-/-Communication-/-Write",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[r("rect",{attrs:{id:"bound",x:"0",y:"0",width:"24",height:"24"}}),r("path",{attrs:{d:"M12.2674799,18.2323597 L12.0084872,5.45852451 C12.0004303,5.06114792 12.1504154,4.6768183 12.4255037,4.38993949 L15.0030167,1.70195304 L17.5910752,4.40093695 C17.8599071,4.6812911 18.0095067,5.05499603 18.0083938,5.44341307 L17.9718262,18.2062508 C17.9694575,19.0329966 17.2985816,19.701953 16.4718324,19.701953 L13.7671717,19.701953 C12.9505952,19.701953 12.2840328,19.0487684 12.2674799,18.2323597 Z",id:"Path-11",fill:"#000000","fill-rule":"nonzero",transform:"translate(14.701953, 10.701953) rotate(-135.000000) translate(-14.701953, -10.701953) "}}),r("path",{attrs:{d:"M12.9,2 C13.4522847,2 13.9,2.44771525 13.9,3 C13.9,3.55228475 13.4522847,4 12.9,4 L6,4 C4.8954305,4 4,4.8954305 4,6 L4,18 C4,19.1045695 4.8954305,20 6,20 L18,20 C19.1045695,20 20,19.1045695 20,18 L20,13 C20,12.4477153 20.4477153,12 21,12 C21.5522847,12 22,12.4477153 22,13 L22,18 C22,20.209139 20.209139,22 18,22 L6,22 C3.790861,22 2,20.209139 2,18 L2,6 C2,3.790861 3.790861,2 6,2 L12.9,2 Z",id:"Path-57",fill:"#000000","fill-rule":"nonzero",opacity:"0.3"}})])])])]),r("a",{staticClass:"btn btn-icon btn-light btn-sm",on:{click:function(e){return t.deleteItem(a)}}},[r("span",{staticClass:"svg-icon svg-icon-md svg-icon-danger"},[r("svg",{attrs:{version:"1.1",viewBox:"0 0 24 24",height:"24px",width:"24px","xmlns:xlink":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/svg"}},[r("title",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[t._v(" Delete Record ")]),r("defs",{attrs:{xmlns:"http://www.w3.org/2000/svg"}}),r("g",{attrs:{xmlns:"http://www.w3.org/2000/svg",id:"Stockholm-icons-/-General-/-Trash",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[r("rect",{attrs:{id:"bound",x:"0",y:"0",width:"24",height:"24"}}),r("path",{attrs:{d:"M6,8 L6,20.5 C6,21.3284271 6.67157288,22 7.5,22 L16.5,22 C17.3284271,22 18,21.3284271 18,20.5 L18,8 L6,8 Z",id:"round",fill:"#000000","fill-rule":"nonzero"}}),r("path",{attrs:{d:"M14,4.5 L14,4 C14,3.44771525 13.5522847,3 13,3 L11,3 C10.4477153,3 10,3.44771525 10,4 L10,4.5 L5.5,4.5 C5.22385763,4.5 5,4.72385763 5,5 L5,5.5 C5,5.77614237 5.22385763,6 5.5,6 L18.5,6 C18.7761424,6 19,5.77614237 19,5.5 L19,5 C19,4.72385763 18.7761424,4.5 18.5,4.5 L14,4.5 Z",id:"Shape",fill:"#000000",opacity:"0.3"}})])])])])]}}])})],1)],1)]),r("hr"),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12",attrs:{id:"formData"}},[r("v-card",[r("v-card-title",[t._v("Fill in Form Data")]),r("v-card-text",[r("validation-observer",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(e){var a=e.handleSubmit;return[r("b-form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),a(t.onSubmit)}}},[r("validation-provider",{attrs:{name:"type",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("b-form-group",{attrs:{label:"Type","label-for":"type"}},[r("b-form-select",{staticClass:"mb-3",attrs:{options:t.types,state:t.getValidationState(e),"aria-describedby":"type"},scopedSlots:t._u([{key:"first",fn:function(){return[r("b-form-select-option",{attrs:{value:null}},[t._v("-- Please select an option --")])]},proxy:!0}],null,!0),model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}}),r("b-form-invalid-feedback",{attrs:{id:"type"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)}),r("validation-provider",{attrs:{name:"Title",rules:"required|min:5"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("b-form-group",{attrs:{label:"Title"}},[r("b-form-input",{attrs:{state:t.getValidationState(e),"aria-describedby":"input-1-live-feedback"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),r("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)}),r("validation-provider",{attrs:{name:"Description",rules:"required|min:5"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("b-form-group",{attrs:{label:" Description","label-for":"desc"}},[r("b-form-textarea",{attrs:{id:"description",name:"description",placeholder:"Enter something...",rows:"3","max-rows":"6",state:t.getValidationState(e),"aria-describedby":"input-3-live-feedback"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),r("b-form-invalid-feedback",{attrs:{id:"input-3-live-feedback"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)}),r("validation-provider",{attrs:{name:"image",rules:""},scopedSlots:t._u([{key:"default",fn:function(e){return[r("b-form-group",[r("b-form-file",{ref:"image",attrs:{accept:"image/*",placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here...",state:t.getValidationState(e),"aria-describedby":"image"},on:{change:t.onFileChange},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}}),r("b-form-invalid-feedback",{attrs:{id:"image"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)}),r("b-button",{attrs:{disabled:t.isDisabled,type:"submit",variant:"success"}},[t._v("Save")]),r("b-button",{staticClass:"ml-2",attrs:{variant:"warning"},on:{click:function(e){return t.resetForm()}}},[t._v("Reset")])],1)]}}])})],1)],1)],1)])],1)},i=[],s=(r("a4d3"),r("e01a"),r("4de4"),r("2b0e")),o=r("0bce"),n={data:function(){return{isDisabled:!1,records:[],types:[],edit:!1,url:null,record_id:"",form:{title:null,description:null,image:null,type:null},filter:{type:null,from_date:null,to_date:null},search:"",expanded:[],headers:[{text:"ID",align:"start",sortable:!1,value:"id"},{text:"Type",value:"artical_type.title"},{text:"Title",value:"title"},{text:"Date",value:"created_at"},{text:"Actions",value:"actions",sortable:!1}]}},mounted:function(){this.$store.dispatch(o["a"],[{title:"Articles",route:"articles"}])},created:function(){this.getRecords()},methods:{onFileChange:function(t){var e=t.target.files||t.dataTransfer.files;e.length||console.log("no files");var r=e[0];this.form.image=r},getValidationState:function(t){var e=t.dirty,r=t.validated,a=t.valid,i=void 0===a?null:a;return e||r?i:null},resetFilter:function(){var t=this;this.filter={from_date:null,to_date:null,type:null},this.$nextTick((function(){t.$refs.observer2.reset()}))},resetForm:function(){var t=this;this.form={title:null,description:null,image:null,type:null},this.$nextTick((function(){t.$refs.observer.reset()}))},getRecords:function(){var t=this;this.$ApiService.get("/Articals").then((function(e){t.resetFilter(),t.records=e.data.data.articals,t.types=e.data.data.types})).catch((function(t){s["default"].$toast.error("get records failed"),console.log(t)}))},onSubmit:function(){this.isDisabled=!0,!1===this.edit?this.insert():this.update()},applyFilter:function(){var t=this;this.$ApiService.post("/Articals/Filter",this.filter).then((function(e){t.records=e.data.data})).catch((function(t){s["default"].$toast.error("get records failed"),console.log(t)}))},insert:function(){var t=this;this.$ApiService.setHeader();var e=new FormData;for(var r in this.form)e.append(r,this.form[r]);this.$ApiService.post("/Artical",e).then((function(e){1==e.data.error?(t.resetForm(),t.$refs.table.scrollIntoView(),t.getRecords(),s["default"].$toast.success("".concat(e.data.result))):s["default"].$toast.error("".concat(e.data.result))})).catch((function(t){s["default"].$toast.error("Some error happened, please try again!"),console.log(t)})),this.isDisabled=!1},addItem:function(){this.edit=!1,this.resetForm()},editItem:function(t){this.edit=!0,this.record_id=t.id,this.form.title=t.title,this.form.description=t.description,this.form.type=t.artical_type_id},viewImage:function(t){null===t.url?this.$confirm({title:"Message",message:"There is no Image to be viewed",button:{no:"Ok"}}):window.open(t.url)},update:function(){var t=this,e=new FormData;for(var r in this.form)e.append(r,this.form[r]);this.$ApiService.post("/Artical/".concat(this.record_id),e).then((function(e){1==e.data.error?(t.resetForm(),t.edit=!1,t.record_id="",t.$refs.table.scrollIntoView(),t.getRecords(),s["default"].$toast.success("".concat(e.data.result))):s["default"].$toast.error("".concat(e.data.result))})).catch((function(t){s["default"].$toast.error("Some error happened, please try again!"),console.log(t)})),this.isDisabled=!1},deleteItem:function(t){var e=this;this.$confirm({title:"Confirmation",message:"Are you sure you want to proceed?",button:{no:"No",yes:"Yes"},callback:function(r){r&&e.$ApiService.delete("/Artical/".concat(t.id)).then((function(t){1==t.data.error?(e.$refs.table.scrollIntoView(),e.getRecords(),s["default"].$toast.success("".concat(t.data.result))):s["default"].$toast.error("".concat(t.data.result))})).catch((function(t){s["default"].$toast.error("Some error happened, please try again!"),console.log(t)}))}})}}},l=n,d=r("2877"),c=r("6544"),u=r.n(c),f=r("b0af"),m=r("99d9"),p=r("8fea"),v=r("132d"),b=r("2fa4"),h=r("8654"),g=Object(d["a"])(l,a,i,!1,null,null,null);e["default"]=g.exports;u()(g,{VCard:f["a"],VCardText:m["a"],VCardTitle:m["b"],VDataTable:p["a"],VIcon:v["a"],VSpacer:b["a"],VTextField:h["a"]})}}]);
//# sourceMappingURL=chunk-2d0b9f0a.b77f931b.js.map